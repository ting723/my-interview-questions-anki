# Go 协程

## GMP

<!-- notecardId: 1735051308261 -->

### GMP 模型

> GMP 是 Go 语言运行时的并发模型，代表 Goroutine、Machine（系统线程）和 Processor（处理器）。

- Goroutine（协程）：是 Go 语言中轻量级的执行单元，创建和切换开销小，能够实现高效的并发编程。
- Machine（系统线程）：由操作系统管理的实际线程。
- Processor（处理器）：是 Go 运行时抽象出来的概念，它关联了可运行的 Goroutine 队列。每个 P 会从其关联的本地队列中获取 Goroutine 并在绑定的 M 上执行。

### GMP 模型的工作方式大致如下

1. 当创建一个 Goroutine 时，它会被放入某个 P 的本地队列中等待执行。
2. M 会从与其绑定的 P 的队列中获取 Goroutine 来执行。
3. 如果 P 的本地队列为空，会尝试从全局队列中获取 Goroutine 或者从其他 P 的队列中窃取。

> GMP 模型使得 Go 语言能够高效地管理和调度并发任务，充分利用多核处理器的性能，同时提供了简洁易用的并发编程模型。
