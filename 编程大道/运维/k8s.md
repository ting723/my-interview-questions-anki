# Kubernetes (K8s) 基本概念和架构

## k8s 的基本概念

<!-- notecardId: 1735106436628 -->

### 基本概念

Kubernetes（简称 K8s）是一个开源的容器编排平台，用于自动化部署、扩展和管理容器化应用程序。它最初由 Google 设计，现在由云原生计算基金会（CNCF）维护。

### 架构

Kubernetes 的架构主要包括以下几个组件：

- **Master 节点**：负责管理和控制整个集群，包括 API Server、Scheduler、Controller Manager 和 etcd。

  - **API Server**：提供 Kubernetes API 的入口。
  - **Scheduler**：负责资源调度，将 Pod 调度到合适的节点上。
  - **Controller Manager**：负责执行集群的控制逻辑。
  - **etcd**：分布式键值存储，用于存储集群的所有数据。

- **Node 节点**：运行实际的应用工作负载，包括 Kubelet、Kube-proxy 和容器运行时。
  - **Kubelet**：负责与 Master 节点通信，并管理 Pod 的生命周期。
  - **Kube-proxy**：负责网络代理和负载均衡。
  - **容器运行时**：如 Docker 或 containerd，负责运行容器。

### 应用场景

Kubernetes 适用于以下应用场景：

- **微服务架构**：支持微服务的部署和管理。
- **持续集成/持续部署（CI/CD）**：自动化应用的构建、测试和部署。
- **弹性伸缩**：根据负载自动扩展或缩减应用实例。
- **混合云和多云管理**：跨多个云平台管理应用。

### 特点

Kubernetes 具有以下特点：

- **自动化运维**：自动化应用的部署、更新和管理。
- **弹性伸缩**：根据需求自动调整应用实例的数量。
- **自愈能力**：自动检测和恢复故障的应用实例。
- **服务发现和负载均衡**：自动分配和管理应用的网络流量。
- **存储编排**：自动挂载和管理存储资源。

### 名词解释

- **Node**：Kubernetes 集群中的一个工作节点，可以是物理机或虚拟机。每个 Node 上运行着 Pod，并由 Master 节点进行管理。
- **Pod**：Kubernetes 中最小的部署单元，一个 Pod 可以包含一个或多个容器，这些容器共享网络和存储资源。
- **Namespace**：用于将集群中的资源进行逻辑上的隔离，不同的 Namespace 中的资源可以具有相同的名称。
- **Deployment**：用于声明应用的期望状态，Kubernetes 会根据 Deployment 的定义来创建和管理 Pod。
- **Service**：定义了一组 Pod 的访问策略，通常用于负载均衡和服务发现。
- **ConfigMap**：用于存储非机密的配置信息，Pod 可以将其挂载为环境变量或配置文件。
- **Secret**：用于存储敏感信息，如密码、OAuth 令牌等，Pod 可以安全地访问这些信息。
- **Volume**：用于将存储资源挂载到 Pod 中，支持多种存储后端，如本地存储、NFS、云存储等。
