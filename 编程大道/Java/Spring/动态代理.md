# Java

## 动态代理

<!-- notecardId: 1735267941045 -->

### 什么是动态代理？

动态代理是一种在运行时创建代理对象的机制。它允许在不修改目标对象代码的情况下，为目标对象添加额外的功能。

### 动态代理和静态代理的区别

- **静态代理**：代理类在编译时就已经确定，代理类和目标类都需要实现相同的接口。
- **动态代理**：代理类在运行时动态生成，不需要提前编写代理类代码。

### JDK 动态代理和 CGLIB 动态代理的区别

#### JDK 动态代理

- **实现方式**：基于 Java 的反射机制，代理类和目标类都需要实现相同的接口。
- **优点**：简单易用，性能较好。
- **缺点**：只能代理实现了接口的类。

#### CGLIB 动态代理

- **实现方式**：基于字节码生成技术，代理类是目标类的子类。
- **优点**：可以代理没有实现接口的类。
- **缺点**：性能稍逊于 JDK 动态代理，生成代理类时需要更多的内存。

### 优缺点总结

- **JDK 动态代理**：
  - 优点：简单易用，性能较好。
  - 缺点：只能代理实现了接口的类。
- **CGLIB 动态代理**：
  - 优点：可以代理没有实现接口的类。
  - 缺点：性能稍逊于 JDK 动态代理，生成代理类时需要更多的内存。
